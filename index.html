<html>

<head>
    <link rel="stylesheet" href="styles.css">
    <title> Ayush Karn</title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=geometry"></script>
</head>
<style>
    html,
    body {
        margin: 0;
        padding: 0;
        text-align: center;
        font-family: Helvetica;
    }

    .map {
        position: absolute;
        top: 3rem;
        left: 0px;
        width: 100%;
        height: 100%;
        background: #fff;
        z-index: 0;
    }

    button {
        position: absolute;
        top: 10px;
        left: 40%;
        flex: 1 1 auto;
        margin: auto;
        padding: 20 50 20 50;
        text-align: center;
        text-transform: uppercase;
        transition: 0.5s;
        background-size: 200% auto;
        box-shadow: 0 0 20px #eee;
        border-top-left-radius: 25px;
        border-bottom-right-radius: 25px;
        background-image: linear-gradient(to right, #b37bb9 0%, #2343b1 51%, #b37bb9 100%);
        color: white;
        font-family: 'Varela', sans-serif;
        text-decoration: none;
    }

</style>

<body>

    <div id="mapCanvas" class="map"></div>
    <button onclick="go()">Launch Rafale</button>
</body>

<script>
    var animLoop = false,
        animIndex = 0,
        planePath = false,
        trailPath = false;
    var count = 0;

    var places = {
        "paris": [48.8566, 2.3522],
        "ambala": [30.3752, 76.7821]
    };

    var icons = {
        flight: {
            icon: 'plane.png'
        },
        paris: {
            icon: 'paris.png'
        },
        ambala: {
            icon: 'ambala.png'
        }
    };
    var val1 = new google.maps.LatLng(48.8566, 2.3522);
    var val2 = new google.maps.LatLng(30.3752, 76.7821);


    function loadMap() {
        var options = {
            draggable: false,
            panControl: false,
            streetViewControl: false,
            scrollwheel: false,
            scaleControl: false,
            disableDefaultUI: true,
            disableDoubleClickZoom: true,
            zoom: 2,
            center: new google.maps.LatLng(38.9637, 35.2433),

        };
        mapObject = new google.maps.Map(document.getElementById('mapCanvas'), options);
        var marker1 = new google.maps.Marker({
            position: val1,
            icon: icons['paris'].icon,
            title: "Paris"
        });
        var marker2 = new google.maps.Marker({
            position: val2,
            icon: icons['ambala'].icon,
            title: "Ambala"
        });
        marker1.setMap(mapObject);
        marker2.setMap(mapObject);
    }


    var planeSymbol = {
        path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
        fillColor: '#fff',
        fillOpacity: 2,
        scale: 5,
        strokeWeight: 0
    };

    function animate() {
        startPoint = [48.8566, 2.3522];
        endPoint = [30.3752, 76.7821];
        var sP = new google.maps.LatLng(startPoint[0], startPoint[1]);
        var eP = new google.maps.LatLng(endPoint[0], endPoint[1]);


        planePath = new google.maps.Polyline({
            path: [sP, eP],
            strokeColor: '#0f0',
            strokeWeight: 0,
            icons: [{
                icon: planeSymbol,
                offset: '0%'
            }],
            map: mapObject,
            geodesic: true
        });

        trailPath = new google.maps.Polyline({
            path: [sP, sP],
            strokeColor: '#2eacd0',
            strokeWeight: 2,
            map: mapObject,
            geodesic: true
        });

        animLoop = window.requestAnimationFrame(function() {
            tick(sP, eP);
        });
    }


    function tick(startPoint, endPoint) {
        animIndex += 0.7;

        var nextPoint = google.maps.geometry.spherical.interpolate(startPoint, endPoint, animIndex / 100);
        trailPath.setPath([startPoint, nextPoint]);

        planePath.icons[0].offset = Math.min(animIndex, 100) + '%';
        planePath.setPath(planePath.getPath());

        if (animIndex >= 100) {
            window.cancelAnimationFrame(animLoop);
            animIndex = 0;
        } else {
            animLoop = window.requestAnimationFrame(function() {
                tick(startPoint, endPoint);
            });
        }
    }


    function go() {
        window.cancelAnimationFrame(animLoop);
        animIndex = 0;
        if (count++ < 5) {
            animate();
        }
        if (count == 6) {
            alert("Rafale Successfully delivered to India");
        }


    }

    loadMap();

</script>

</html>
